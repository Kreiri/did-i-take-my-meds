<?xml version="1.0" encoding="utf-8"?>
<!--Did I Take My Meds? is a FOSS app to keep track of medications
    Did I Take My Meds? is designed to help prevent a user from skipping doses and/or overdosing
    Copyright (C) 2021  Noah Stanford <noahstandingford@gmail.com>

    Did I Take My Meds? is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Did I Take My Meds? is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see https://www.gnu.org/licenses.-->

<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>
        <variable
            name="vm"
            type="dev.corruptedark.diditakemymeds.activities.add_edit_med.MedViewModel" />

        <import type="android.view.View" />
    </data>

    <androidx.appcompat.widget.LinearLayoutCompat
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="?ditmm_colorBackground"
        android:orientation="vertical"
        tools:context=".activities.add_edit_med.AddMedActivity">

        <include
            android:id="@+id/appbar"
            layout="@layout/view_toolbar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:fadeScrollbars="false">

            <androidx.appcompat.widget.LinearLayoutCompat
                android:layout_width="match_parent"
                android:orientation="vertical"
                android:layout_height="wrap_content"
                android:paddingHorizontal="20dp"
                android:paddingTop="20dp">

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:hint="@string/medication_name"
                    style="@style/Widget.TextInput.Accented"
                    android:theme="@style/Theme.TextInput">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/med_name"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        tools:text="Finalgon"
                        android:text="@={vm.name}"
                        android:textSize="@dimen/small_text_size" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.switchmaterial.SwitchMaterial
                    android:id="@+id/as_needed_switch"
                    style="@style/Widget.Switch.Accented"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/taken_as_needed"
                    android:checked="@={vm.asNeeded}"
                    tools:checked="false" />

                <com.google.android.material.switchmaterial.SwitchMaterial
                    android:id="@+id/require_photo_proof_switch"
                    style="@style/Widget.Switch.Accented"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/require_photo_proof"
                    tools:visibility="visible"
                    android:checked="@={vm.requirePhotoProof}"
                    android:visibility="@{vm.showRequireProofSwitch ? View.VISIBLE : View.GONE}"
                    tools:checked="false" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/repeat_schedule_button"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingHorizontal="10dp"
                    android:paddingVertical="15dp"
                    android:textSize="@dimen/medium_text_size"
                    tools:text="@string/schedule_dose"
                    tools:visibility="visible"
                    android:visibility="@{vm.showSchedulingUI ? View.VISIBLE : View.GONE}"
                    app:schedule="@{vm.schedule}"
                    app:blankScheduleText="@{@string/schedule_dose}"
                    android:onClick="@{() -> vm.onRepeatScheduleTapped()}"
                    style="@style/Widget.Button.Accented.Outlined" />

                <androidx.recyclerview.widget.RecyclerView
                    android:id="@+id/shedules_list"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="@{vm.showSchedulingUI ? View.VISIBLE : View.GONE}"
                    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                    tools:itemCount="2"
                    tools:listitem="@layout/extra_dose_template2"
                    tools:visibility="visible" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/extra_dose_button"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginVertical="5dp"
                    android:paddingVertical="15dp"
                    android:textSize="@dimen/medium_text_size"
                    android:text="@string/add_another_dose"
                    app:icon="@drawable/add_box"
                    app:iconGravity="textStart"
                    android:textColor="?colorAccent"
                    app:strokeColor="?ditmm_colorBorder"
                    app:iconTint="?colorAccent"
                    tools:visibility="visible"
                    android:onClick="@{() -> vm.onExtraDoseButtonTapped()}"
                    android:visibility="@{vm.showExtraDoseButton ? View.VISIBLE : View.GONE}"
                    style="@style/Widget.MaterialComponents.Button.OutlinedButton" />

                <com.google.android.material.switchmaterial.SwitchMaterial
                    android:id="@+id/notification_switch"
                    style="@style/Widget.Switch.Accented"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/notifications_enabled"
                    tools:visibility="visible"
                    android:visibility="@{vm.showNotificationSwitch ? View.VISIBLE : View.GONE}"
                    android:checked="@={vm.notify}"
                    tools:checked="true" />

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="10dp"
                    android:hint="@string/rx_number_hint"
                    style="@style/Widget.TextInput.Accented"
                    android:theme="@style/Theme.TextInput">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/rx_number_input"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="@={vm.rxNumber}"
                        android:textSize="@dimen/small_text_size" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="10dp"
                    android:hint="@string/medication_type"
                    style="@style/Widget.TextInput.Dropdown"
                    android:theme="@style/Theme.TextInput.ExposedDropdownMenu">

                    <AutoCompleteTextView
                        android:id="@+id/med_type_input"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:dropDownWidth="wrap_content"
                        android:dropDownHeight="wrap_content"
                        android:inputType="textNoSuggestions"
                        android:popupElevation="0dp"
                        android:text="@={vm.medTypeString}"
                        android:textSize="@dimen/small_text_size" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.switchmaterial.SwitchMaterial
                    android:id="@+id/take_with_food_switch"
                    style="@style/Widget.Switch.Accented"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/take_with_food"
                    android:checked="@={vm.takeWithFood}" />

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="10dp"
                    android:hint="@string/dose_amount"
                    style="@style/Widget.TextInput.Accented"
                    android:theme="@style/Theme.TextInput">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/dose_amount_input"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:inputType="numberDecimal"
                        android:text="@={vm.amountPerDoseString}"
                        android:textSize="@dimen/small_text_size" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="10dp"
                    android:hint="@string/dose_unit"
                    style="@style/Widget.TextInput.Dropdown"
                    android:theme="@style/Theme.TextInput.ExposedDropdownMenu">

                    <AutoCompleteTextView
                        android:id="@+id/dose_unit_input"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:inputType="textNoSuggestions"
                        android:textSize="@dimen/small_text_size"
                        android:text="@={vm.doseUnitString}"
                        android:dropDownHeight="wrap_content"
                        android:dropDownWidth="wrap_content"
                        android:popupElevation="0dp" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="10dp"
                    android:hint="@string/remaining_doses"
                    style="@style/Widget.TextInput.Accented"
                    android:theme="@style/Theme.TextInput">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/remaining_doses_input"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:inputType="number"
                        android:text="@={vm.remainingDosesString}"
                        android:textSize="@dimen/small_text_size" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="10dp"
                    android:hint="@string/pharmacy"
                    style="@style/Widget.TextInput.Accented"
                    android:theme="@style/Theme.TextInput">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/pharmacy_input"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="@={vm.pharmacy}"
                        android:textSize="@dimen/small_text_size" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="10dp"
                    android:paddingBottom="20dp"
                    android:hint="@string/description"
                    style="@style/Widget.TextInput.Accented"
                    android:theme="@style/Theme.TextInput">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/med_detail"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:textSize="@dimen/small_text_size"
                        android:text="@={vm.description}"
                        android:gravity="start|top"
                        android:minLines="4" />

                </com.google.android.material.textfield.TextInputLayout>

            </androidx.appcompat.widget.LinearLayoutCompat>
        </ScrollView>

    </androidx.appcompat.widget.LinearLayoutCompat>
</layout>